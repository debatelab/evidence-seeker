<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>‚öôÔ∏è Advanced Configuration ‚Äì üïµÔ∏è‚Äç‚ôÄÔ∏è EvSe</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../docs_configuration/example_hf_inference_provider.html" rel="next">
<link href="../docs_configuration/minimal_configuration.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-48fbefe780f5a27fc13c67afc8cc4f05.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="üïµÔ∏è‚Äç‚ôÄÔ∏è EvidenceSeeker Boilerplate">
<meta property="og:description" content="A Python code template for building customised LLM-based AI fact-checking assistants.">
<meta property="og:image" content="https://debatelab.github.io/evidence-seeker/docs_configuration/img/evse_preview.png">
<meta property="og:site_name" content="">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">üïµÔ∏è‚Äç‚ôÄÔ∏è EvSe</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
    <a href="https://www.linkedin.com/company/kideku/" title="KIdeKu LinkedIn" class="quarto-navigation-tool px-1" aria-label="KIdeKu LinkedIn"><i class="bi bi-linkedin"></i></a>
    <a href="https://github.com/debatelab/evidence-seeker" title="EvSe GitHub" class="quarto-navigation-tool px-1" aria-label="EvSe GitHub"><i class="bi bi-github"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../configuration.html">Configuration</a></li><li class="breadcrumb-item"><a href="../docs_configuration/advanced_configuration.html">Advanced Configuration</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../getting_started.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting Started</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../workflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Pipeline</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../configuration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Configuration</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs_configuration/minimal_configuration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Minimal Configuration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs_configuration/advanced_configuration.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Advanced Configuration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs_configuration/example_hf_inference_provider.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Example: Hugging Face Inference Provider</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs_configuration/example_local_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Example: Local Models with LM Studio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs_configuration/example_advanced_index_operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Example: Advanced Index Operations</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../roadmap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Contributing &amp; Roadmap</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#retriever-component" id="toc-retriever-component" class="nav-link active" data-scroll-target="#retriever-component">Retriever Component</a>
  <ul>
  <li><a href="#embedding-model" id="toc-embedding-model" class="nav-link" data-scroll-target="#embedding-model">Embedding Model</a></li>
  <li><a href="#knowledge-base" id="toc-knowledge-base" class="nav-link" data-scroll-target="#knowledge-base">Knowledge Base</a>
  <ul class="collapse">
  <li><a href="#using-postgresql" id="toc-using-postgresql" class="nav-link" data-scroll-target="#using-postgresql">Using PostgreSQL</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#preprocessor-confirmation-analysis" id="toc-preprocessor-confirmation-analysis" class="nav-link" data-scroll-target="#preprocessor-confirmation-analysis">Preprocessor &amp; Confirmation Analysis</a>
  <ul>
  <li><a href="#models" id="toc-models" class="nav-link" data-scroll-target="#models">Models</a>
  <ul class="collapse">
  <li><a href="#model-backend-type" id="toc-model-backend-type" class="nav-link" data-scroll-target="#model-backend-type">Model Backend Type</a></li>
  </ul></li>
  <li><a href="#step-configurations" id="toc-step-configurations" class="nav-link" data-scroll-target="#step-configurations">Step Configurations</a>
  <ul class="collapse">
  <li><a href="#default-step-configuration" id="toc-default-step-configuration" class="nav-link" data-scroll-target="#default-step-configuration">Default Step Configuration</a></li>
  <li><a href="#guidance" id="toc-guidance" class="nav-link" data-scroll-target="#guidance">Guidance</a></li>
  <li><a href="#log-probablities" id="toc-log-probablities" class="nav-link" data-scroll-target="#log-probablities">Log Probablities</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#api-keys" id="toc-api-keys" class="nav-link" data-scroll-target="#api-keys">API Keys</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/debatelab/evidence-seeker/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../configuration.html">Configuration</a></li><li class="breadcrumb-item"><a href="../docs_configuration/advanced_configuration.html">Advanced Configuration</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">‚öôÔ∏è Advanced Configuration</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Here, we will give an overview of the most important configuration parameters. You will find more information in the comments of the <a href="https://github.com/debatelab/evidence-seeker/tree/main/configs">default configuration files</a>.</p>
<p>Additionally, we give some example configurations, which illustrate how to configure the pipeline for two use cases:</p>
<ul>
<li><a href="../docs_configuration/example_local_models.html">Using local models with EvidenceSeeker</a>:</li>
<li><a href="../docs_configuration/example_hf_inference_provider.html">Using Hugging Face Inference Provider with EvidenceSeeker</a>:</li>
</ul>
<section id="retriever-component" class="level2">
<h2 class="anchored" data-anchor-id="retriever-component">Retriever Component</h2>
<p>For the retriever component, you can configure the used <strong>embedding model</strong> and the <strong>knowledge base</strong> used for fact-checking.</p>
<section id="embedding-model" class="level3">
<h3 class="anchored" data-anchor-id="embedding-model">Embedding Model</h3>
<p>The used <strong>embedding model</strong> can be configured via the <code>embed_backend_type</code>, <code>embed_base_url</code>, and <code>embed_model_name</code> parameters.</p>
<ul>
<li>As <code>embed_backend_type</code>, you can choose between
<ul>
<li><code>tei</code> (<a href="https://github.com/huggingface/text-embeddings-inference">text embedding inference</a>): API for serving embedding models, that can be used, for instance, with <a href="https://huggingface.co/learn/cookbook/en/enterprise_dedicated_endpoints">dedicated endpoints for embedding models by Hugging Face</a>.</li>
<li><code>huggingface</code>: This is for local models hosted on Hugging Face and used with the Hugging Face API. The retriever component will download the model from Hugging Face during the first use. You might need a lot of disk space and memory, depending on the model size. Additionally, it might take some time to create the index.</li>
<li><code>huggingface_inference_api</code>: This is for embedding models accessed via <a href="https://huggingface.co/docs/inference-providers/index">Hugging Face Inference Provider</a>.</li>
</ul></li>
<li>For all these options, specify the <code>embed_base_url</code> and <code>embed_model_name</code> parameters. For instance, if you use <a href="https://huggingface.co/sentence-transformers/paraphrase-multilingual-mpnet-base-v2">sentence-transformers/paraphrase-multilingual-mpnet-base-v2</a> as the embedding model and if you want to use it via Hugging Face inference provider, you would set:
<ul>
<li><code>base_url</code> to <em>‚Äúhttps://router.huggingface.co/hf-inference/models/sentence-transformers/paraphrase-multilingual-mpnet-base-v2‚Äù</em> and</li>
<li><code>embed_model_name</code> to <em>‚Äúsentence-transformers/paraphrase-multilingual-mpnet-base-v2‚Äù</em></li>
</ul></li>
<li>Depending on the backend type, you might also have to specify an <code>api_key_name</code> and <code>env_file</code> parameter to provide the API key for the embedding model (see <a href="#api-keys">below</a> for details). If you use a local model, you can omit these parameters.</li>
<li>Some important model parameters for the embedding model include:
<ul>
<li><code>top_k</code> (default value: 8): The number of documents that are retrieved from the knowledge base by the embedding model (see <a href="../workflow.html#retriever">here</a> for details).</li>
<li><code>window_size</code> (default value: 3): The adjacent content (measured in token size) is taken as context when creating an embedding.</li>
<li><code>embed_batch_size</code> (default value: 32): The number of text chunks processed simultaneously when creating an embedding.</li>
</ul></li>
</ul>
</section>
<section id="knowledge-base" class="level3">
<h3 class="anchored" data-anchor-id="knowledge-base">Knowledge Base</h3>
<p>The most important parameters of working with your <strong>knowledge base</strong>:</p>
<ul>
<li><code>document_input_dir</code>: Path to the directory containing your PDF files you want to use as a knowledge base. Alternatively, you can provide a list of files via the <code>document_input_files</code> parameter.</li>
<li><code>meta_data_file</code>: Path to a JSON file containing metadata for the files in your knowledge base.</li>
</ul>
<p>Currently, the index is loaded into the machine‚Äôs memory, where the EvidenceSeeker pipeline runs. Alternatively, the index can be stored in a PostgreSQL database or a repository on the Hugging Face Hub. If a PostgreSQL database should be used, <code>use_postgres</code> must be set to <code>True</code>. Otherwise, at least one of the following two paths must be set for the retriever component to locate the index of your knowledge base: <code>index_hub_path</code> or <code>index_persist_path</code>. These parameters have different roles during the creation and loading of the index:</p>
<ul>
<li><em>Creating the index:</em> If you create the index of your knowledge base, the retriever component will store the index in the directory specified by <code>index_persist_path</code>. If you use a Hugging Face Hub repository, you can specify <code>index_hub_path</code> to store the index in a Hugging Face Hub repository.</li>
<li><em>Loading the index:</em> When the retriever component is initialised, it will load the index from the path specified by <code>index_persist_path</code>. If you use a Hugging Face Hub repository, you can specify <code>index_hub_path</code> to load the index from a Hugging Face Hub repository. If both paths are specified and <code>index_persist_path</code> is empty, the index will be loaded (once) from the Hub path and saved to the local path.</li>
<li><code>hub_key_name</code>: If you use a private Hugging Face Hub repository, you have to specify the name of the environment variable that contains your Hugging Face Hub API key (see <a href="#api-keys">below</a> for details on how to set the API key). If you use a public repository, you can omit this parameter.</li>
</ul>
<section id="using-postgresql" class="level4">
<h4 class="anchored" data-anchor-id="using-postgresql">Using PostgreSQL</h4>
<p>For using a PostgreSQL database, you have to configure several parameters, besides setting <code>use_postgres</code> to <code>True</code> as mentioned above. A short snippet of an example configuration of these parameters can be found below as well as <a href="../docs_configuration/example_advanced_index_operations.html#postgresql-vector-store-support">here</a>. The following describes the parameters and their functionality in detail:</p>
<ul>
<li><em>Establishing a connection</em>: <strong>Required</strong> are a username provided by <code>postgres_user</code> and a matching user password. The password can be either provided directly via <code>postgres_password</code> or, if <code>env_file</code> is set, by setting <code>postgres_password_env_var</code> to the name of a environment variable containing the password. By default, the PostgreSQL server hosting the database is assumed to be available on localhost under port 5432. To configure the address, use the parameters <code>postgres_host</code> and <code>postgres_port</code>. The default database name is ‚Äúevidence_seeker‚Äù, this can be changed by setting <code>postgres_database</code>.</li>
<li><em>Creating and loading the index</em>: <code>postgres_table_name</code> and <code>postgres_schema_name</code> point to the table and the schema of the database that should contain the index. By default, the table is assumed to be named ‚Äúevse_embeddings‚Äù and that the default public schema is used for it. For instantiating a vector index, the dimension of the used embedding must be specified by the pipeline. You can set it explicitly via the parameter <code>postgres_embed_dim</code>. If not set, the pipeline will infer the dimension at runtime. Finally, the parameter <code>postgres_llamaindex_table_name_prefix</code> specifies the prefix of LlamaIndex tables. By default, it is set to ‚Äúdata_‚Äù. You may change the prefix or explicitly set it to ‚Äúnull‚Äù to let the pipeline infer the prefix at runtime.</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="at">use_postgres = True</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The address your PostgreSQL server is running at</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="at">postgres_host = "localhost"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">postgres_port = "5432"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The name of the database hosted at that server that stores the index</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">postgres_database "evidence_seeker"</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># A username for connecting to the PostgreSQL server</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">postgres_user = "&lt;your_username&gt;"</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># A password for connecting to the PostgreSQL server...</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">postgres_password = "&lt;your_password&gt;"</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># ...or alternatively the name of an env variable storing the password and a path to an .env file</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="at">postgres_password_env_var = "postgres_password"</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="at">env_file = "&lt;path/to/your/.env&gt;"</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># The table and schema name for storing the index</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="at">postgres_table_name = "evse_embeddings"</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="at">postgres_schema_name = "public"</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Prefix for LlamaIndex tables in Postgres</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="at">postgres_llamaindex_table_name_prefix = "data_"</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Dimension of the embeddings used</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="at">postgres_embed_dim = null</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Before executing the pipeline, make sure your PostgreSQL server is running at the specified address. For information on how to set up a PostgreSQL server and database, refer to the official documentation <a href="https://www.postgresql.org/docs/">here</a>.</p>
</section>
</section>
</section>
<section id="preprocessor-confirmation-analysis" class="level2">
<h2 class="anchored" data-anchor-id="preprocessor-confirmation-analysis">Preprocessor &amp; Confirmation Analysis</h2>
<section id="models" class="level3">
<h3 class="anchored" data-anchor-id="models">Models</h3>
<p>You can define an arbitrary number of models in the configuration files for the preprocessor and the confirmation analysis component, and then assign these models to the whole pipeline or specific steps of the pipeline. In this way, you can easily switch between models and even use different models for different pipeline steps.</p>
<p>In your configuration YAML files, you can define the models in the following way:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">models</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">your_first_model</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">api_key_name</span><span class="kw">:</span><span class="at"> your_api_key_name</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">backend_type</span><span class="kw">:</span><span class="at"> backend_type_of_your_model</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">base_url</span><span class="kw">:</span><span class="at"> your_base_url</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">description</span><span class="kw">:</span><span class="at"> description_of_your_model</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">model</span><span class="kw">:</span><span class="at"> your_model_identifier</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> your_model_name</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">    # some optional parameters</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">temperature</span><span class="kw">:</span><span class="at"> </span><span class="fl">0.2</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">timeout</span><span class="kw">:</span><span class="at"> </span><span class="dv">260</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">max_tokens</span><span class="kw">:</span><span class="at"> </span><span class="dv">1024</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">your_second_model</span><span class="kw">:</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">api_key_name</span><span class="kw">:</span><span class="at"> your_api_key_name</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">backend_type</span><span class="kw">:</span><span class="at"> backend_type_of_your_model</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">base_url</span><span class="kw">:</span><span class="at"> your_base_url</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">description</span><span class="kw">:</span><span class="at"> description_of_your_model</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">model</span><span class="kw">:</span><span class="at"> your_model_identifier</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> your_model_name</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co">    # some optional parameters</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">temperature</span><span class="kw">:</span><span class="at"> </span><span class="fl">0.2</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">timeout</span><span class="kw">:</span><span class="at"> </span><span class="dv">260</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">max_tokens</span><span class="kw">:</span><span class="at"> </span><span class="dv">1024</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><code>your_first_model</code> and <code>your_second_model</code> are arbitrary identifiers for the models you use in your config to specify which model to use for which step of the pipeline. You can assign a defined model, say <code>your_global_model</code>, as ‚Äúglobal‚Äù model via</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">used_model_key</span><span class="kw">:</span><span class="at"> your_global_model</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>that is used for all pipeline steps that do not have a specific model attached via their step configuration (see below).</p>
<p><strong>Further clarifications:</strong></p>
<ul>
<li><strong>API Keys:</strong> The <em>EvidenceSeeker</em> expects API keys to be set as environment variables with the name specified by <code>api_key_name</code> for each model. If you use a file with environment variables via <code>env_file</code>, the file should contain a line like this: <code>name_of_your_api_key=your_api_key</code>. Alternatively, you can set the environment variable directly in your shell or script before running the EvidenceSeeker pipeline (see <a href="#api-keys">below</a>).
<ul>
<li>If you do not need an API key (e.g., if you use a local model), you can omit the <code>env_file</code> and <code>api_key_name</code> parameters.</li>
</ul></li>
<li><code>base_url</code> and <code>model</code> are important since they specify the endpoint and model.
<ul>
<li>For instance, if you use <a href="https://huggingface.co/meta-llama/Llama-3.3-70B-Instruct?inference_api=true&amp;language=python&amp;inference_provider=hf-inference">Hugging Face as inference provider with Llama-3.3-70B-Instruct</a>, you would set:
<ul>
<li><code>base_url</code> to <em>‚Äúhttps://router.huggingface.co/hf-inference/models/meta-llama/Llama-3.3-70B-Instruct/v1‚Äù</em> and</li>
<li><code>model</code> to <em>‚Äúmeta-llama/Llama-3.3-70B-Instruct‚Äù</em></li>
</ul></li>
</ul></li>
</ul>
<section id="model-backend-type" class="level4">
<h4 class="anchored" data-anchor-id="model-backend-type">Model Backend Type</h4>
<p>The backend type of the model is configured via <code>backend_type</code> and used to specify the model‚Äôs API client. The following backend types are currently supported:</p>
<ul>
<li><code>nim</code>: For models accessible via <a href="https://docs.nvidia.com/nim/large-language-models/latest/introduction.html">Nvidia NIM API</a>.</li>
<li><code>tgi</code> (text generation inference): For models served via <a href="https://github.com/huggingface/text-generation-inference">TGI API</a>, for instance, dedicated Hugging Face endpoints.</li>
<li><code>openai</code>: For inference endpoints accessible via APIs consistent with <a href="https://platform.openai.com/docs/api-reference/introduction">OpenAI API</a>, for instance, inference provider over Hugging Face.</li>
</ul>
<p>You can also use local models, e.g., with <a href="https://lmstudio.ai/">LMStudio</a>. Models served via LMStudio can be used with the <code>openai</code> backend type. In this case, you can omit the <code>api_key_name</code> and <code>env_file</code> parameters since no API key is needed for local models. You will find the relevant information about the <code>base_url</code> and the <code>model</code> identifier within LMStudio (see also the <a href="../docs_configuration/example_local_models.html">example configuration with local models</a>).</p>
</section>
</section>
<section id="step-configurations" class="level3">
<h3 class="anchored" data-anchor-id="step-configurations">Step Configurations</h3>
<p>The preprocessor and the confirmation analysis components have several steps that can be configured independently. You can specify the model for each step via the <code>used_model_key</code> parameter.</p>
<p>Additionally, most of the step-specific configuration parameters can be defined in a model-specific way. In this way, you can easily switch between different models for different steps of the pipeline and optimise the performance of each step for different models. For instance, you can provide different prompt templates for each step, optimised for different models.</p>
<p>A typical step configuration within your config file would look like this:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">step_identifier</span><span class="kw">:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">description</span><span class="kw">:</span><span class="at"> Instruct the model to do ...</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> step_name</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">  # defining the model to use for this step</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">used_model_key</span><span class="kw">:</span><span class="at"> your_model_identifier</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">llm_specific_configs</span><span class="kw">:</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">    # default configuration for the step</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">default</span><span class="kw">:</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">prompt_template</span><span class="kw">:</span><span class="at"> your_default_prompt_template</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">system_prompt</span><span class="kw">:</span><span class="at"> your_default_step_system_prompt</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="at">      ...</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">    # configuration for a specific model that </span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">    # is used for this step, if the model is specified</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">    # via the `used_model_key` parameter</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">your_model_identifier</span><span class="kw">:</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">prompt_template</span><span class="kw">:</span><span class="at"> your_model_specific_prompt_template</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">system_prompt</span><span class="kw">:</span><span class="at"> your_model_specific_step_system_prompt</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="at">      ...</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">alternative_model_identifier</span><span class="kw">:</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="at">      ...</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<section id="default-step-configuration" class="level4">
<h4 class="anchored" data-anchor-id="default-step-configuration">Default Step Configuration</h4>
<p>The field <code>llm_specific_configs</code> contains model-specific configuration settings for the step. If the list does not contain a model-specific configuration that matches the specified global or step-specific <code>used_model_key,</code> the <code>default</code> configuration is used.</p>
</section>
<section id="guidance" class="level4">
<h4 class="anchored" data-anchor-id="guidance">Guidance</h4>
<p>Some steps in the <em>EvidenceSeeker</em> pipeline presuppose that the language model supports <em>structured outputs</em>, that is, a model output in a specific format such as JSON. Since different language models have different capabilities, the EvidenceSeeker pipeline allows you to specify a <code>guidance_type</code> parameter in the step configuration that defines the expected output format. You have to check the documentation of the language model you use to see if it supports structured outputs and which formats it supports.</p>
<p>Currently, the EvidenceSeeker pipeline supports the following <code>guidance_type</code> values for the confirmation analyser component:</p>
<ul>
<li><code>json</code> if the model should be instructed to output a JSON string (currently supported by the backend types <code>openai</code>, <code>nim</code> and <code>tgi</code>).</li>
<li><code>grammar</code> if the model should be instructed to output a string that conforms to a specific grammar (currently supported by the backend types <code>openai</code>).</li>
<li><code>regex</code> if the model should be instructed to output a string that matches a specific regular expression (currently supported by the backend types <code>openai</code> and <code>tgi</code>).</li>
<li><code>prompted</code> if there is no way to instruct the model to output a structured format. In this case, you can instruct the model to output a string that matches a specific format via the prompt. There is, however, no guarantee that the model will actually output a string that matches the expected format.
<ul>
<li>If you use <code>prompted</code> to generate structured outputs, you should provide a <code>prompt_template</code> that contains the instructions for the LLM to output a string that matches the expected format.</li>
<li>If you use <code>prompted</code> to generate structured outputs, you can provide a regular expression via <code>validation_regex</code> that will be used to validate the model output. If the model output does not match the regular expression, the EvidenceSeeker pipeline will raise an error.</li>
</ul></li>
</ul>
</section>
<section id="log-probablities" class="level4">
<h4 class="anchored" data-anchor-id="log-probablities">Log Probablities</h4>
<p>Language models use log probabilities (in short: logprobs) to decide which token to generate next. The are calculated by taking the natural logarithm over the probability distribution of next tokens. The confirmation analyser component uses these to calculate the degree of confirmation for statements based on found evidence items in the knowledge base (see <a href="../workflow.html#confirmation-analyser">here</a> for details). If the chosen model does not support the retrieval of logprobs, the EvidenceSeeker pipeline can estimate logprobs by repeating inference requests and taking the frequency of answers to estimate the logprobs.</p>
<p>This is done by setting the <code>logprobs_type</code> parameter in the step configuration to <code>estimate</code> and setting the number of repetitions <code>n_repetitions_mcq</code> to at least <span class="math inline">\(30\)</span>. The default value for <code>logprobs_type</code> is <code>openai_like</code>, which assumes that logprobs are returned in a <a href="https://platform.openai.com/docs/api-reference/chat/create">format consistent with the OpenAI API</a>.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is a trade-off when estimating logprobs by repeating inference requests: To increase the accuracy of logprobs estimation, you should set a sufficiently high value for <code>n_repetitions_mcq</code> (&gt;100). However, this will also increase the inference time and cost. Using <code>n_repetitions_mcq=30</code> should be considered as a mere proof of concept. Using a model that supports an explicit logprobs output is always preferable.</p>
</div>
</div>
</section>
</section>
</section>
<section id="api-keys" class="level2">
<h2 class="anchored" data-anchor-id="api-keys">API Keys</h2>
<p>If you use third-party APIs (e.g., OpenAI, Hugging Face, etc.) for the language models or embedding models, you must provide API keys for these services. The <em>EvidenceSeeker</em> pipeline assumes that these API keys are set via environment variables with the names specified in the configuration files (<code>api_key_name</code>).</p>
<p>There are two ways to set these environment variables:</p>
<ol type="1">
<li>You set these environment variables directly in your shell or script before running the EvidenceSeeker pipeline. For example, in a Unix-like shell, you can set an environment variable like this:</li>
</ol>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>   <span class="bu">export</span> <span class="va">YOUR_API_KEY_NAME</span><span class="op">=</span>your_api_key_value</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ol start="2" type="1">
<li>You can use a file with environment variables specified in the configuration files via <code>env_file</code> (see above). This file should contain lines like this:</li>
</ol>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>YOUR_API_KEY_NAME=your_api_key_value</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/debatelab\.github\.io\/evidence-seeker\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../docs_configuration/minimal_configuration.html" class="pagination-link" aria-label="Minimal Configuration">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Minimal Configuration</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../docs_configuration/example_hf_inference_provider.html" class="pagination-link" aria-label="Example: Hugging Face Inference Provider">
        <span class="nav-page-text">Example: Hugging Face Inference Provider</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Part of <a href="https://compphil2mmae.github.io/research/kideku/"><img src="../img/logoKIdeKu.jpg" class="img-fluid" alt="KIdeKu" width="20"></a></p>
</div>   
    <div class="nav-footer-center">
<p><a href="../about.html" class="text-decoration-none">About</a> | <a href="../imprint.html" class="text-decoration-none">Imprint</a> <br> Copyright ¬© 2024-2025 <a href="https://compphil2mmae.github.io/" class="text-decoration-none">CompPhil¬≤MMAE</a> @ KIT.</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/debatelab/evidence-seeker/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>